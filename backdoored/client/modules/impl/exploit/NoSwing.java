package l.c.h.j.exploit;

import l.c.q;
import l.c.h.d.c;
import l.c.h.h.j;
import l.c.h.h.a.o;
import l.c.h.j.w;
import l.c.h.j.w$d;
import l.c.h.j.c.z$c;
import net.minecraft.network.play.client.CPacketAnimation;
import net.minecraft.network.play.client.CPacketPlayerDigging;
import net.minecraft.network.play.client.CPacketPlayerDigging.Action;
import net.minecraft.util.EnumFacing;
import net.minecraft.util.math.BlockPos;
import net.minecraftforge.client.event.MouseEvent;
import net.minecraftforge.fml.common.eventhandler.SubscribeEvent;

@w$d(
   name = "NoSwing",
   description = "Prevents the swing animation for others",
   category = c.EXPLOIT
)
public class NoSwing extends w {
   private final j jj;
   public static final int jc;
   public static final boolean jo;

   public NoSwing() {
      this.jj = new o("Mode", this, z$c.fru);
   }

   @SubscribeEvent
   public void k(l.c.u.s.c var1) {
      if (this.qm() && this.jj.ti() == z$c.fru && var1.packet instanceof CPacketAnimation) {
         var1.setCanceled(true);
      }

   }

   @SubscribeEvent
   public void k(MouseEvent var1) {
      if (this.qm() && this.jj.ti() == z$c.fri) {
         if (mc.objectMouseOver.entityHit == null) {
            BlockPos var2 = mc.objectMouseOver.getBlockPos();
            q.ei().sendPacket(new CPacketPlayerDigging(Action.START_DESTROY_BLOCK, var2, EnumFacing.UP));
            q.ei().sendPacket(new CPacketPlayerDigging(Action.STOP_DESTROY_BLOCK, var2, EnumFacing.UP));
            var1.setCanceled(true);
         }

         if (var1.getButton() == 0 && mc.objectMouseOver.entityHit != null) {
            mc.playerController.attackEntity(mc.player, mc.objectMouseOver.entityHit);
            var1.setCanceled(true);
         }

      }
   }
}
