package l.c.h.j.exploit;

import java.time.Instant;
import l.c.h.d.c;
import l.c.h.h.j;
import l.c.h.j.w;
import l.c.h.j.w$d;
import l.c.x.g;
import l.c.x.k;
import l.c.x.d.a;
import net.minecraft.init.Items;
import net.minecraft.inventory.ClickType;
import net.minecraft.item.Item;
import net.minecraft.network.play.client.CPacketHeldItemChange;
import net.minecraft.network.play.client.CPacketPlayerTryUseItem;
import net.minecraft.util.EnumHand;

@w$d(
   name = "Map Spam",
   description = "Spams maps in order to cause a map reset",
   category = c.EXPLOIT
)
public class MapSpam extends w {
   private j ffk = new l.c.h.h.a.d.c("Delay", this, 1.0D, 0.1D, 4.0D);
   private Instant fff;
   public static final boolean ffq;
   public static final int fft;
   public static final boolean ffe;

   public MapSpam() {
      this.fff = Instant.EPOCH;
   }

   public void d() {
      if (this.qm() && g.k(this.fff, Instant.now(), Math.round((Double)this.ffk.ti() * 1000.0D))) {
         int var1 = k.f((Item)Items.MAP);
         if (var1 == -1) {
            this.f(false);
            a.fs("No empty maps in your hotbar :(");
            return;
         }

         mc.player.connection.sendPacket(new CPacketHeldItemChange(var1));
         mc.player.inventory.currentItem = var1;
         mc.player.connection.sendPacket(new CPacketPlayerTryUseItem(EnumHand.MAIN_HAND));
         byte var2 = 0;
         if (var2 <= 44) {
            if (mc.player.inventoryContainer.getSlot(var2).getStack().getItem() == Items.FILLED_MAP) {
               mc.playerController.windowClick(mc.player.openContainer.windowId, var2, 0, ClickType.THROW, mc.player);
               mc.player.inventory.removeStackFromSlot(var2);
            }

            int var6 = var2 + 1;
         }
      }

   }
}
